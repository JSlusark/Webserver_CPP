#Applies to the entire server unless overridden.
listen 8080;
listen 8082;
listen 8085;
root www;
error_page 404 /static/404.html;
client_max_body_size 1000000;

#Applies only to requests that match a certain path prefix.
location / {
    root www/static;
    index index.html;
    autoindex off;
    methods GET;
}

# Enable autoindex for images
location /static/images {
    root www/static/images;
    autoindex on;
    methods GET;
}

# Keep autoindex off for JS
location /static/js {
    root www/static/js;
    autoindex off;
    methods GET;
}

location /upload {
    root www/upload;
    methods GET POST DELETE;
    upload_dir www/upload;
    autoindex on;
}

location /cgi-bin {
    cgi_extension .py .php;
    root www/cgi-bin;
    methods GET POST;
}

location /old {
    return 301 /static/index.html;
}

location /42 {
    return 301 https://42berlin.de/;
}